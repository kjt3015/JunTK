<!DOCTYPE html>
<html>
<!-- 1. 좌측 박스안의 업로드 버튼 클릭 -->
<!-- 2. 업로드된 엑셀 파일 내용 좌측 박스에 출력 -->
<!-- https://www.youtube.com/watch?v=QJaSYyxa0H4 -->

<head>
    <title>Renna</title>
    <link rel="stylesheet" href="style.css">

    <script>
        window.onload = () => {
            // FILE READER + HTML ELEMENTS
            var reader = new FileReader(),
                picker = document.getElementById("picker"),
                table = document.getElementById("table");

            //READ CSV ON FILE PICK
            picker.onchange = () => {
                //ENTIRE CSV FILE
                let csv = reader.result;
                // console.log(csv);

                // CLEAR HTML TABLE
                table.innerHTML = "";

                // SPLIT INTO ROWS
                let rows = csv.split("\r\n");
                // console.log(row);

                // LOOP THROUGH ROWS + SPLIT COLUMNS
                for (let row of rows) {
                    let cols = row.match(/(?:\"([^\"]*(?:\"\"[^\"]*)*)\")|([^\",]+)/g);
                    // if (cols != null) {
                    //     let tr = table.inserRow();
                    //     for (let col of cols) {
                    //         let td = tr.insertCell();
                    //         td.innerHTML = col;
                    //     }
                    // }
                    console.log(cols);
                }

                // console.log("end the program");
            };
        };
    </script>

</head>

<body>
    <div class="title">
        <p>
            [Renna's 과제]
        </p>

        <table id="table" border="1" bordercolor="blue" width="800" height="400" align="conter">
            <th> Input </th>
            <th> Output </th>
            <tr>
                <td rowspan="3" align="center">
                    이곳에 파일 입력 버튼을 넣을 예정입니다.<br>
                    <input type="file" accept=".csv" id="picker">
                </td>

                <td>
                    입력된 파일의 내용입니다.
                    <dir>
                        내용
                    </dir>
                </td>
            </tr>
            <tr>
                <td>
                    입력된 파일의 내용을 계산후 결과 입니다.
                    <div>
                        결과
                    </div>
                </td>
            </tr>
        </table>
    </div>
</body>

</html>